<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<title>–û–ø–∞—Å–Ω–æ—Å—Ç—å —ç–Ω–µ—Ä–≥–µ—Ç–∏–∫–∞</title>

<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">

<style>
  body {
    margin: 0;
    font-family: 'Nunito', sans-serif;
    background: linear-gradient(135deg, #b6fcb3, #ffb3b3);
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    padding: 15px;
  }

  .card {
    width: 90vw;
    max-width: 450px;
    min-height: 650px;
    background: white;
    border-radius: 26px;
    padding: 25px 20px;
    box-shadow: 0 25px 40px rgba(0,0,0,0.15);
    display: flex;
    flex-direction: column;
    position: relative;
  }

  h1 {
    text-align: center;
    margin: 0;
    font-size: 1.8rem;
    color: #333;
  }

  /* –î–ï–í–û–ß–ö–ê */
  #girl {
    width: 200px;
    display: block;
    margin: 20px auto;
    transition: 0.5s ease;
  }

  /* –ü–∞–¥–∞–µ—Ç */
  .fall {
    transform: rotate(90deg) translateY(40px);
  }

  /* –û–ë–õ–ê–ß–ö–û */
  .bubble {
    position: absolute;
    top: 120px;
    left: 50%;
    transform: translateX(-50%);
    background: #fff;
    padding: 12px 18px;
    border-radius: 20px;
    font-size: 1rem;
    color: #444;
    box-shadow: 0 5px 10px rgba(0,0,0,0.1);
    display: none;
  }

  /* –≠–ù–ï–†–ì–ï–¢–ò–ö ‚Äî –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ–º */
  #energy {
    width: 90px;
    position: absolute;
    bottom: 130px;
    left: 50%;
    transform: translateX(-50%);
    cursor: grab;
    touch-action: none;
  }

  .buttons {
    margin-top: auto;
    display: flex;
    justify-content: space-between;
  }

  .btn {
    background: #6c63ff;
    color: white;
    padding: 12px 26px;
    border-radius: 30px;
    text-decoration: none;
    font-weight: 600;
    transition: 0.3s;
  }

  .btn:hover {
    background: #554ee0;
  }
</style>
</head>

<body>

<div class="card">

  <h1>‚ö° –û–ø–∞—Å–Ω—ã–π —ç–Ω–µ—Ä–≥–µ—Ç–∏–∫</h1>

  <div class="bubble" id="bubble">–ú–Ω–µ –ø–ª–æ—Ö–æ... üò¢</div>

  <img id="girl" src="img/girl1.jpg" alt="–î–µ–≤–æ—á–∫–∞">

  <img id="energy" src="img/energy.jpg" alt="–≠–Ω–µ—Ä–≥–µ—Ç–∏–∫">

  <div class="buttons">
    <a href="index.html" class="btn">‚Üê –ù–∞–∑–∞–¥</a>
    <a href="next.html" class="btn">–î–∞–ª—å—à–µ ‚Üí</a>
  </div>
</div>

<script>
const girl = document.getElementById("girl");
const energy = document.getElementById("energy");
const bubble = document.getElementById("bubble");

let offsetX, offsetY;

energy.addEventListener("mousedown", startDrag);
energy.addEventListener("touchstart", startDrag);

function startDrag(e) {
  e.preventDefault();
  offsetX = (e.touches ? e.touches[0].clientX : e.clientX) - energy.offsetLeft;
  offsetY = (e.touches ? e.touches[0].clientY : e.clientY) - energy.offsetTop;

  document.addEventListener("mousemove", drag);
  document.addEventListener("mouseup", stopDrag);

  document.addEventListener("touchmove", drag);
  document.addEventListener("touchend", stopDrag);
}

function drag(e) {
  const x = (e.touches ? e.touches[0].clientX : e.clientX) - offsetX;
  const y = (e.touches ? e.touches[0].clientY : e.clientY) - offsetY;

  energy.style.left = x + "px";
  energy.style.top = y + "px";

  checkCollision();
}

function stopDrag() {
  document.removeEventListener("mousemove", drag);
  document.removeEventListener("mouseup", stopDrag);

  document.removeEventListener("touchmove", drag);
  document.removeEventListener("touchend", stopDrag);
}

function checkCollision() {
  const g = girl.getBoundingClientRect();
  const e = energy.getBoundingClientRect();

  if (
    e.right > g.left &&
    e.left < g.right &&
    e.bottom > g.top &&
    e.top < g.bottom
  ) {
    girl.src = "img/girl2.jpg";
    girl.classList.add("fall");
    bubble.style.display = "block";
  }
}
</script>

</body>
</html>
